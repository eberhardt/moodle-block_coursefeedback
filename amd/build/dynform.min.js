function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}define("block_coursefeedback/dynform",["exports","core/ajax","jquery","core/str"],(function(_exports,_ajax,_jquery,Str){function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}
/**
   * Manager for the coursefeedback blocks rankingpage (ranking.php).
   *
   * @module      block_coursefeedback
   * @copyright   2022 onwards Felix Di Lenarda (@ innoCampus, TU Berlin)
   * @license     http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
   */Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,_ajax=_interopRequireDefault(_ajax),_jquery=_interopRequireDefault(_jquery),Str=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(Str);_exports.init=function(){(0,_jquery.default)("#id_feedback").change((function(){var selectedfeedback=(0,_jquery.default)("#id_feedback").val();_ajax.default.call([{methodname:"block_coursefeedback_get_feedback_questions",args:{feedbackid:selectedfeedback}}])[0].done((function(data){window.console.debug("AJAX FEEDBACK DONE"),(0,_jquery.default)("#id_question").html(""),Str.get_string("form_option_choose","block_coursefeedback").done((function(string){(0,_jquery.default)("<option/>").val("-1").html(string).appendTo("#id_question"),data.questions.forEach((function(quest){window.console.debug(quest),(0,_jquery.default)("<option/>").val(quest.id).html(quest.question).appendTo("#id_question")}))}))})).fail((function(ex){window.console.debug("ajax fAIL"),window.console.debug(ex)})),window.console.debug(selectedfeedback)})),(0,_jquery.default)("#id_question").change((function(){var selectedquestion=(0,_jquery.default)("#id_question").val();_ajax.default.call([{methodname:"block_coursefeedback_get_ranking_for_question",args:{id:selectedquestion,answerlimit:0,showperpage:200,page:1}}])[0].done((function(questiondata){window.console.debug("AJAX QUESTION DONE");var tbody=window.document.getElementById("coursefeedback_table").getElementsByTagName("tbody")[0];tbody.innerHTML="AAA",questiondata.ranking.forEach((function(course){var row=tbody.insertRow(),cell1=row.insertCell(0),cell2=row.insertCell(1),cell3=row.insertCell(2);cell1.innerHTML=course.courseid,cell2.innerHTML=course.answerstotal,cell3.innerHTML=course.avfeedbackresult}))})).fail((function(ex){window.console.debug("ajax QUESTION fAIL"),window.console.debug(ex)}))})),(0,_jquery.default)("#id_downloadfb").click((function(){var url=new URL(window.location);url.searchParams.append("action","download"),url.searchParams.append("feedback",(0,_jquery.default)("#id_feedback").val()),window.location.href=url})),(0,_jquery.default)("#id_downloadqu").click((function(){var url=new URL(window.location);url.searchParams.append("action","download"),url.searchParams.append("feedback",(0,_jquery.default)("#id_feedback").val()),url.searchParams.append("question",(0,_jquery.default)("#id_question").val()),window.location.href=url})),window.onbeforeunload=null}}));

//# sourceMappingURL=dynform.min.js.map